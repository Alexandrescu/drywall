<!DOCTYPE html>
<html>
    <head>
        <script src="/socket.io/socket.io.js"></script>
        <script type="text/javascript">
            var socketio = io.connect("http://localhost:3000");

            var token = "09d4521023e02e39080b59c666e9851ece36da649ccac03bc93f011a4a64995f761a6b1660698aa87e263233ecdd7fe8";
            //var token = "token";
            var lectureId = "5356ec5c624b4a301e569091";
            var questionId = "5356ed4337f74d3832ef57b3";

            socketio.emit("setData", {token: token, lectureId: lectureId});
            function addQuestion () {
                var theContent = document.getElementById("message_input").value;
                socketio.emit('addQuestion', {content: theContent, slideNumber: 5});
            }

            socketio.on("news", function(data) {
                document.getElementById("chatlog").innerHTML = ("<hr/>" +
                data['hello'] + document.getElementById("chatlog").innerHTML);
            });

            function sendMessage() {
                var msg = document.getElementById("message_input").value;
                socketio.emit("pulse", {message : msg});
            }

            function vote() {
                socketio.emit('addVote', {questionId : questionId});
            }

            function addAnswer() {
                var answer = document.getElementById("answer").value;
                socketio.emit('addAnswer', {questionId : questionId, answer:answer });
            }
        </script>
    </head>
    <body>
        <form action="/api/login/" method="post">
            <div>
                <label>Username:</label>
                <input type="text" name="username"/>
            </div>
            <div>
                <label>Password:</label>
                <input type="password" name="password"/>
            </div>
            <div>
                <input type="submit" value="Log In"/>
            </div>
        </form>

        <input type="text" id="message_input"/>
        <button onclick="addQuestion()">send</button>
        <button onclick="vote()">vote</button>
        <hr/>
        <input type="text" id="answer"/>
        <button onclick="addAnswer()">answer</button>
        <div id="chatlog"></div>
    </body>
</html>